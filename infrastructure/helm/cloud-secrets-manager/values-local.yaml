# Local Kubernetes (Docker Desktop) Values
# Use with: helm install csm . -n csm -f values-local.yaml

# Use locally built images
image:
  repositorySecretService: "csm/secret-service"
  repositoryAuditService: "csm/audit-service"
  tag: "local"
  pullPolicy: Never  # Use local images

secretService:
  replicaCount: 1
  port: 8080
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"

auditService:
  replicaCount: 1
  port: 8081
  resources:
    requests:
      memory: "128Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "250m"

# Service accounts (no GCP annotations for local)
serviceAccount:
  create: true
  annotations: {}

auditServiceAccount:
  create: true
  annotations: {}

# Create secrets locally (not using External Secrets Operator)
createSecrets: true
jwtSecret: "local-dev-jwt-secret-key-minimum-32-chars!"
aesKey: "local-dev-aes-key-32-bytes-here!"

# Enable local PostgreSQL
postgres:
  enabled: true
  secretsDb:
    user: secrets_user
    password: secrets_password_local
    db: secrets
    storage: 1Gi
  auditDb:
    user: audit_user
    password: audit_password_local
    db: audit
    storage: 1Gi

# Disable Cloud SQL (using local postgres)
cloudSql:
  enabled: false

# Firebase/Google Identity (disabled for local)
googleIdentity:
  enabled: false
  projectId: "cloud-secrets-manager"

# Ingress (use NodePort for local access)
ingress:
  enabled: false  # We'll use port-forward instead

# Monitoring integration
monitoring:
  enabled: true
  prometheus:
    enabled: true
  grafana:
    enabled: true
