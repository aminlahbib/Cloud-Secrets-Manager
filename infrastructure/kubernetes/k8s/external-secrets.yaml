apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: csm-db-secrets
  namespace: cloud-secrets-manager
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: gcp-secret-manager
    kind: ClusterSecretStore
  target:
    name: csm-db-secrets
    creationPolicy: Owner
  data:
  - secretKey: secrets-db-user
    remoteRef:
      key: secrets-db-user
  - secretKey: secrets-db-password
    remoteRef:
      key: secrets-db-password
  - secretKey: audit-db-user
    remoteRef:
      key: audit-db-user
  - secretKey: audit-db-password
    remoteRef:
      key: audit-db-password
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: csm-app-config
  namespace: cloud-secrets-manager
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: gcp-secret-manager
    kind: ClusterSecretStore
  target:
    name: csm-app-config
    creationPolicy: Owner
  data:
  - secretKey: JWT_SECRET
    remoteRef:
      key: jwt-secret
  - secretKey: AES_KEY
    remoteRef:
      key: aes-key
  - secretKey: GOOGLE_PROJECT_ID
    remoteRef:
      key: google-project-id
  - secretKey: GOOGLE_API_KEY
    remoteRef:
      key: google-api-key
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: csm-google-service-account
  namespace: cloud-secrets-manager
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: gcp-secret-manager
    kind: ClusterSecretStore
  target:
    name: csm-google-service-account
    creationPolicy: Owner
  data:
  - secretKey: service-account.json
    remoteRef:
      key: google-service-account-json

